# Веб-приложение "Знание плюс"

## Описание:      
    Данное веб-приложение является шаблоном платформы для онлайн-обучения.
    Содержит два отдельных приложения приложения: 
    "materials" - приложение, в котором прописана основная логика платформы для онлайн-обучения;    
    "users" - приложение для регистрации и авторизации пользователей, а также для настройки доступа для 
    авторизированных пользователей. Также в данном приложении содержится информация о платежах пользователей.     
    Данное приложение разработано с помощью фреймворка Django и Django REST framework (DRF).
    Подключена PostgreSQL для работы в проекте.
    В проект добавлены Celery и celery-beat для работы с отложенными и периодическими задачами.
    Вывод документации для проекта осуществляется с помощью drf-yasg.
        
---

## Содержание:
* ## <a id="title1">Описание</a>
* ## <a id="title1">Установка</a>
* ## <a id="title1">Описание файлов</a>
* ## <a id="title1">Команда проекта</a>
* ## <a id="title1">Источники</a>

---

## Установка:
1. #### Клонируйте репозиторий:
```commandline
python
git clone git@github.com:MikhailGubin/knowledge_plus.git
```

2. #### Установите зависимости:
```commandline
python
poetry install
```

---

## Описание программы:

1. #### Приложение mailing_service 
##### Описание:        
    Созданы следующие модели:

    Модель «Курс»:
    * название,
    *превью (картинка),
    *описание,
    *владелец.
    
    Модель «Урок»:
    * название,
    *описание,
    *превью (картинка),
    *ссылка на видео,
    *владелец.

    Созданы CRUD для моделей Курс и Урок. Для реализации CRUD для курса использовано Viewset, 
    а для урока - Generic-классы.
    Для модели "Курс" добавлен сериализатор для вывода поля количества уроков, а также реализовано поле вывода уроков.
    Для моделей "Курс" и "Урок" данные записаны в файл materials_fixture.json с фикстурами.
    Для поля ссылка на видео для модели "Урок" реализована дополнительная проверка на отсутствие в 
    материалах ссылок на сторонние ресурсы, кроме youtube.com.
    Реализована пагинация для вывода всех уроков и курсов.
    Проект содержит тесты, которые проверяют корректность работы CRUD уроков.
    
   
2. #### Приложение users 
##### Описание: 
    Созданы следующие модели:
    Модель «Пользователь»:   
    * все поля от обычного пользователя, но авторизацию заменить на email;
    *пароль,
    * аватар (изображение),
    * телефон,
    * город

    Модель «Платеж»:   
    * пользователь,
    * дата оплаты,
    * оплаченный курс,
    * оплаченный урок,
    * сумма оплаты,
    * способ оплаты: наличные или перевод на счет.

    Модель «Подписка»:
    * пользователь,
    * курс.

    Модель «Оплата курса»:
    * пользователь;
    * оплаченный курс;
    * дата и время платежа;
    * сумма оплаты;
    * id сессии:
    * ссылка на оплату.
    
    Электронная почта используется как поле для авторизации.
    Созданы CRUD для модели Пользователь. Для реализации CRUD использовано APIView.
    Каждый эндпоинт в проекте закрыт авторизацией, кроме регистрации и авторизации пользователей.
    В данном проекте использована JWT-авторизация.
    Для моделей "Платежи" и "Пользователь" данные записаны в соответствущие файлы с фикстурами 
    (payments_fixture.json, users_fixture.json). 
    Настроена фильтрация для эндпоинта вывода списка платежей с возможностью:
    * менять порядок сортировки по дате оплаты;
    * фильтровать по курсу или уроку;
    * фильтровать по способу оплаты.  
    Создана группа модераторов. Модераторы могут работать с любыми уроками и курсами, но не могут их удалять
    и создавать новые.
    Авторизованные пользователи, которые не входят в группу модераторов, могут видеть, редактировать и удалять
    только свои курсы и уроки.
    Создана команда для создания суперпользователя - csu.
    Для заполнения группы модераторы в базе данных создана фикстура users/fixtures/groups.json
    Добавлена модель подписки на обновления курса для пользователя.
    При выборке данных по курсу пользователю присылается информация, подписан данный пользователь 
    на обновления курса или нет. Данную подписку можно добавлять и удалять.
    После обновления материалов курса подписанным пользователям приходят письма на почту с информацией.
    Проект содержит тесты, которые проверяют функционал работы подписки на обновления курса.
    Подключена возможность оплаты курсов через https://stripe.com/docs/api.
    Для работы с запросами реализовано обращение к эндпоинтам:
    — создание продукта;
    — создание цены;
    — создание сессии для получения ссылки на оплату.
    Если пользователь не заходил на сайт более 1 месяца, то он блокируется с помощью флага is_active.    
---

## Команда проекта:
* Губин Михаил — Back-End Engineer

---

## Источники:
* курс лекций и учебных материалов учебного центра "SkyPro"
